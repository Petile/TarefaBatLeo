<!DOCTYPE html>
<html lang="en">
  <head>
    <!-- Google Tag Manager -->
    <script>
      (function (w, d, s, l, i) {
        w[l] = w[l] || [];
        w[l].push({ 'gtm.start': new Date().getTime(), event: 'gtm.js' });
        var f = d.getElementsByTagName(s)[0],
          j = d.createElement(s),
          dl = l != 'dataLayer' ? '&l=' + l : '';
        j.async = true;
        j.src = 'https://www.googletagmanager.com/gtm.js?id=' + i + dl;
        f.parentNode.insertBefore(j, f);
      })(window, document, 'script', 'dataLayer', 'GTM-5WRTLN3');
    </script>
    <!-- End Google Tag Manager -->
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-KyZXEAg3QhqLMpG8r+8fhAXLRk2vvoC2f3B09zVXn8CA5QIVfZOJ3BCsw2P0p/We"
      crossorigin="anonymous"
    />
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.0/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-U1DAWAznBHeqEIlVSCgzq+c9gqGAJn5c/t99JyeKa9xxaYpSvHU5awsuZVVFIhvj"
      crossorigin="anonymous"
    ></script>
    <title>Le Lis Blanc</title>
    <style>
      .btn {
        margin-bottom: 5px;
        margin-top: 5px;
      }
    </style>
  </head>
  <body>
    <!-- Google Tag Manager (noscript) -->
    <noscript
      ><iframe
        src="https://www.googletagmanager.com/ns.html?id=GTM-5WRTLN3"
        height="0"
        width="0"
        style="display: none; visibility: hidden"
      ></iframe
    ></noscript>
    <!-- End Google Tag Manager (noscript) -->
    <script>
      const products = [
        {
          id: '08.18.0117',
          id2: '2001259',
          sku: '08.18.0117_10_2',
          variant: '08.18.0117_10_2',
          size: 'M',
          color: 'black',
          permalink: 'https://example.com/product/p1.html',
          name: 'Produto 1',
          priceFrom: 200,
          price: 100,
          brand: 'Brand 1',
          category: 'cat1/cat2/cat3',
          list: 'Compre o look',
          position: 1,
          quantity: 1,
          coupon: '50%OFF', // o produto sai por R$ 50,00
          presale: true,
          new: true,
          unavailable: false,
          gift: false,
          giftwrap: false,
          fromlook: false,
          quickshop: false,
        },
        {
          id: '09.18.0117',
          id2: '3001259',
          sku: '09.18.0117_10_2',
          variant: '09.18.0117_10_2',
          size: 'M',
          color: 'black',
          permalink: 'https://example.com/product/p2.html',
          name: 'Produto 2',
          priceFrom: 300,
          price: 200,
          brand: 'Brand 2',
          category: 'cat1/cat2/cat3',
          list: 'Compre o look',
          position: 2,
          quantity: 1,
          coupon: undefined,
          presale: true,
          new: true,
          unavailable: false,
          gift: false,
          giftwrap: false,
          fromlook: false,
          quickshop: false,
        },
      ];
      const visitor = {
        id: '123456789',
        guest: false,
        email: 'visitor@email.com.br',
        firstname: 'Visitante',
        lastname: 'Teste',
        dataOfBirth: '21-11-2000',
        newBuyer: false,
        ltv: 5678,
        phone: '+5511999999999',
        gender: 'F',
        city: 'Cotia',
        state: 'SP',
        cep: '12345-678',
        device: 'Desktop',
      };
      const transactionProducts = [
        {
          ...products[0],
          quantity: 1,
          rawAmount: 50,
          promotions: [
            {
              name: '50% de desconto no item',
              id: 'promo2',
              quantityAdjusted: 1,
              discount: 50,
            },
          ],
        },
        {
          ...products[1],
          quantity: 2,
          rawAmount: 200,
          promotions: [],
        },
      ];
      const payment = {
        type: '1CC',
        installments: 1,
      };
      const deliveries = [
        {
          number: 'delivery1',
          products: transactionProducts[0],
          shipping: 20,
          type: 'entrega em casa',
          deliveryTime: 7,
          pickupStore: undefined,
        },
        {
          number: 'delivery2',
          products: transactionProducts[1],
          shipping: 0,
          type: 'pickup in store',
          deliveryTime: 0,
          pickupStore: 'Le Lis Blanc | Shopping Cidade São Paulo',
        },
      ];

      const transaction = {
        actionField: {
          id: 'T123',
          coupon: '50%FRETE', // desconto com escopo de pedido
          revenue: 50 /*1 produto p1 com desconto de 50%*/ + 2 * 200 /*2 produtos p2*/ + 20 /*frete*/,
          amount: 50 + 2 * 200,
          rawAmount: 50 + 2 * 200,
          shipping: 20,
          shippingDiscount: 20,
          promotions: [
            {
              name: '50% de desconto no frete',
              id: 'promo1',
              discount: 20,
            },
          ],
        },
        currencyCode: 'BRL',
        transactionProducts,
        payment,
        delivery: deliveries,
      };
      const filters = [{ tamanho: 'P' }, { cor: 'amarelo' }, { colecao: 'new print' }];

      const base_DL1 = {
        _clear: true,
        event: 'pageView',
        visitor,
        // pageType => passar para cada tipo de página
        // pageCategory => enviar "Feminino/Sapatos/Sandália" em category.
        // searchTerm => enviar "sapato" em search.
        area: 'Le Lis Blanc',
        // shelfProducts: products,
        // listProducts: products,
        // cartProducts: products,
        // filters,
      };

      switch (location.search) {
        case '?other':
          dataLayer.push({
            ...base_DL1,
            pageType: 'other',
          });
          break;
        case '?home':
          dataLayer.push({
            ...base_DL1,
            pageType: 'home',
            shelfProducts: products,
          });
          break;
        case '?search':
          dataLayer.push({
            ...base_DL1,
            pageType: 'search',
            listProducts: products,
            searchTerm: 'sapato',
            filters,
          });
          break;
        case '?category':
          dataLayer.push({
            ...base_DL1,
            pageType: 'category',
            pageCategory: 'Feminino/Sapatos/Sandália',
            listProducts: products,
            filters,
          });
          break;
        case '?product':
          dataLayer.push({
            ...base_DL1,
            pageType: 'product',
            listProducts: [products[0]],
            shelfProducts: products,
          });
          break;
        case '?cart':
          dataLayer.push({
            ...base_DL1,
            pageType: 'cart',
            cartProducts: [products[0]],
            shelfProducts: products,
          });
          break;
        case '?checkout':
          dataLayer.push({
            ...base_DL1,
            pageType: 'checkout',
          });
          break;
        case '?purchase':
          dataLayer.push({
            ...base_DL1,
            pageType: 'purchase',
          });
          break;
      }
    </script>

    <h4>
      Mock para implementação do
      <a
        href="https://docs.google.com/spreadsheets/d/1RSvhSRAcO7V0fhJOcwHoJDEfP7cxWNMrEInXT_BfMJ4/edit#gid=580461650"
        target="_blank"
        >plano de tagueamento</a
      >
      da Restoque / Le Lis Blanc.
    </h4>
    <p>
      Implementar primeiro as tags de GA (filtrar na coluna "Mídia/Plataforma" da planilha), depois Ads, depois
      Facebook, depois o resto. Obs: o plano de tagueamento ainda não está completo (tem 92 atualmente). Novas tags
      serão adicionadas provavelmente no final de setembro/2021.
    </p>
    <p>
      No plano de tags, ignore diversas colunas que dizem respeito à implementação no container real. Exemplos:
      "PRIORIDADE", "STATUS GTM-SF", ...
    </p>
    <p>
      Não utilizar endpoints e IDs reais nas tags. Por exemplo, no lugar da propriedade real da Le Lis Blanc, utilizar a
      sua propriedade de GA. No caso de endpoints, se possível mocar com algum endpoint que você consiga visualizar o
      disparo, como a Beeceptor ou ferramenta parecida.
    </p>
    <p>
      Para disparar pushes de pageView (DL1), carregar o site com a query "?&#60;pageType&#62;" (exemplos: "?home",
      "?product").
    </p>
    <hr />

    <a href="?other"><h4>other</h4></a>
    <p>Aqui estão concentrados pushes e data-attributes genéricos que podem ocorrer em qualquer página.</p>
    <button
      type="button"
      class="btn btn-secondary btn-sm"
      onclick="
      dataLayer.push({
        ...base_DL1,
        pageType: 'other',
      });
    "
    >
      DL1 (genérico, sem produtos)
    </button>
    <button
      type="button"
      class="btn btn-secondary btn-sm"
      onclick="
      dataLayer.push({
        event: 'whatsapp click',
        whatsappContext: 'Fale com a loja via  WhatsApp'
      });
    "
    >
      DL8
    </button>
    <button
      type="button"
      class="btn btn-secondary btn-sm"
      onclick="
      dataLayer.push({
        _clear: true,
        event: 'phone click',
        phoneContext: 'Telefone do Shopping Cidade São Paulo'
      });
    "
    >
      DL9
    </button>
    <button
      type="button"
      class="btn btn-secondary btn-sm"
      onclick="
      dataLayer.push({
        _clear: true,
        event: 'email click',
        emailContext: 'Email de contato do  Shopping Cidade São Paulo'
      });
    "
    >
      DL10
    </button>
    <button
      type="button"
      class="btn btn-secondary btn-sm"
      onclick="
      dataLayer.push({
        _clear: true,
        event: 'drive',
        driveContext: 'Shopping Cidade São Paulo'
      });
    "
    >
      DL11
    </button>
    <button
      type="button"
      class="btn btn-secondary btn-sm"
      onclick="
      dataLayer.push({
        _clear: true,
        event: 'buy look',
        buylookContext: products[0],
      });
    "
    >
      DL12
    </button>
    <button
      type="button"
      class="btn btn-secondary btn-sm"
      onclick="
      dataLayer.push({
        _clear: true,
        event: 'browse this store',
        browsestoreContext: 'Le Lis Blanc | Shopping Cidade São Paulo',
      });
    "
    >
      DL13
    </button>
    <button
      type="button"
      class="btn btn-secondary btn-sm"
      onclick="
      dataLayer.push({
        _clear: true,
        event: 'social network click',
        socialNetwork: 'Instagram',
      });
    "
    >
      DL14
    </button>
    <button
      type="button"
      class="btn btn-secondary btn-sm"
      onclick="
      dataLayer.push({
        _clear: true,
        event: 'social network sharing',
        socialNetwork: 'Instagram',
        sharedContent: 'Article: Tendências tons pastéis e de azul',
      });
    "
    >
      DL15
    </button>
    <button
      type="button"
      class="btn btn-secondary btn-sm"
      onclick="
      dataLayer.push({
        _clear: true,
        event: 'wishlist products load',
        wishlistProducts: products,
      });
    "
    >
      DL17
    </button>
    <button
      type="button"
      class="btn btn-secondary btn-sm"
      onclick="
      dataLayer.push({
        _clear: true,
        event: 'warn me',
        warnmeType: 'email and whatsapp',
        warnmeProduct: products[0],
      });
    "
    >
      DL18
    </button>
    <button
      type="button"
      class="btn btn-secondary btn-sm"
      onclick="
      dataLayer.push({
        _clear: true,
        event: 'freight calculation',
        zipcode: '12345-678',
      });
    "
    >
      DL19
    </button>
    <button
      type="button"
      class="btn btn-secondary btn-sm"
      onclick="
      dataLayer.push({
        _clear: true,
        event: 'add to wishlist',
        wishlistProduct: products[0],
      });
    "
    >
      DL21
    </button>
    <button
      type="button"
      class="btn btn-secondary btn-sm"
      onclick="
      dataLayer.push({
        _clear: true,
        event: 'newsletter registration',
        newsOptIn: true,
        newsletterEmail: 'a@b.com',
      });
    "
    >
      DL25
    </button>
    <button
      type="button"
      class="btn btn-secondary btn-sm"
      onclick="
      dataLayer.push({
        _clear: true,
        event: 'exclusive event registration',
        exclusiveEventName: 'Pedro Pedroso',
        exclusiveEventEmail: 'pp@b.com',
      });
    "
    >
      DL26
    </button>
    <button
      type="button"
      class="btn btn-secondary btn-sm"
      onclick="
      dataLayer.push({
        _clear: true,
        event: 'reseller registration',
      });
    "
    >
      DL27
    </button>
    <button
      type="button"
      class="btn btn-secondary btn-sm"
      onclick="
      dataLayer.push({
        _clear: true,
        event: 'signup filling - name',
      });
      dataLayer.push({
        _clear: true,
        event: 'signup filling - email',
      });
    "
    >
      DL28
    </button>
    <button
      type="button"
      class="btn btn-secondary btn-sm"
      onclick="
      dataLayer.push({
        _clear: true,
        event: 'signup',
        signupOrigin: 'checkout',
      });
    "
    >
      DL29
    </button>
    <button
      type="button"
      class="btn btn-secondary btn-sm"
      onclick="
      dataLayer.push({
        _clear: true,
        event: 'login',
        loginOrigin: 'menu',
      });
    "
    >
      DL30
    </button>
    <button
      type="button"
      class="btn btn-secondary btn-sm"
      onclick="
      dataLayer.push({
        _clear: true,
        event: 'remove from wishlist',
        wishlistRemovedProducts: products,
      });
    "
    >
      DL31
    </button>
    <button type="button" class="btn btn-primary btn-sm" data-gtm-click-action="signup-start">DA4 - Criar Conta</button>
    <button type="button" class="btn btn-primary btn-sm" data-gtm-click-action="signup-goto-address">
      DA5 - Avançar
    </button>
    <button
      type="button"
      class="btn btn-primary btn-sm"
      data-gtm-click-action="signup-register"
      onclick="location.reload()"
    >
      DA6 - Cadastrar
    </button>

    <hr />
    <a href="?home"><h4>home</h4></a>
    <p>Implementar Promotion View e Promotion Click utilizando data-attributes.</p>
    <button
      type="button"
      class="btn btn-primary btn-lg"
      data-promo-id="banner1"
      data-promo-name="nome do banner1"
      data-promo-creative="criativo do banner1"
      data-promo-position="primeiro"
      onclick="location.reload()"
    >
      DA1 - banner1
    </button>
    <button
      type="button"
      class="btn btn-primary btn-lg"
      data-promo-id="banner2"
      data-promo-name="nome do banner2"
      data-promo-creative="criativo do banner2"
      data-promo-position="segundo"
      onclick="location.reload()"
    >
      DA1 - banner2
    </button>

    <hr />
    <a href="?search"><h4>search</h4></a>
    <button
      type="button"
      class="btn btn-secondary btn-sm"
      onclick="
      dataLayer.push({
        _clear: true,
        event: 'add filter',
        shelfProducts: undefined,
        listProducts: [ products[0] ],
        filter: filters[0],
      });
    "
    >
      DL22
    </button>
    <button
      type="button"
      class="btn btn-secondary btn-sm"
      onclick="
      dataLayer.push({
        _clear: true,
        event: 'remove filter',
        shelfProducts: undefined,
        listProducts: [ products[1] ],
        filter: filters[1],
      });
    "
    >
      DL23
    </button>
    <button
      type="button"
      class="btn btn-secondary btn-sm"
      onclick="
      dataLayer.push({
        _clear: true,
        event: 'clear filters',
        shelfProducts: undefined,
        listProducts: products,
        filters: filters,
      });
    "
    >
      DL24
    </button>

    <hr />
    <a href="?category"><h4>category</h4></a>
    <p>Implementar Product Impressions e Product Click utilizando data-attributes.</p>
    <button
      type="button"
      class="btn btn-primary btn-lg"
      data-product-id="08.18.0117"
      data-product-id2="2001259"
      data-product-sku="08.18.0117_10_2"
      data-product-variant="08.18.0117_10_2"
      data-product-size="M"
      data-product-color="black"
      data-product-permalink="https://example.com/product/p1.html"
      data-product-name="Produto 1"
      data-product-priceFrom="200"
      data-product-price="100"
      data-product-brand="Brand 1"
      data-product-category="cat1/cat2/cat3"
      data-product-list="Compre o look"
      data-product-position="1"
      data-product-presale="true"
      data-product-new="true"
      data-product-unavailable="false"
      data-product-gift="false"
      data-product-giftwrap="false"
      data-product-fromlook="false"
      data-product-quickshop="false"
      onclick="location.reload()"
    >
      DA2 - Produto 1
    </button>
    <button
      type="button"
      class="btn btn-primary btn-lg"
      data-product-id="09.18.0117"
      data-product-id2="3001259"
      data-product-sku="09.18.0117_10_2"
      data-product-variant="09.18.0117_10_2"
      data-product-size="M"
      data-product-color="black"
      data-product-permalink="https://example.com/product/p2.html"
      data-product-name="Produto 2"
      data-product-priceFrom="300"
      data-product-price="200"
      data-product-brand="Brand 2"
      data-product-category="cat1/cat2/cat3"
      data-product-list="Compre o look"
      data-product-position="2"
      data-product-presale="true"
      data-product-new="true"
      data-product-unavailable="false"
      data-product-gift="false"
      data-product-giftwrap="false"
      data-product-fromlook="false"
      data-product-quickshop="false"
      onclick="location.reload()"
    >
      DA2 - Produto 2
    </button>
    <button
      type="button"
      class="btn btn-secondary btn-sm"
      onclick="
      dataLayer.push({
        _clear: true,
        event: 'more products - infinite scroll',
        listProducts: products,
      });
    "
    >
      DL5
    </button>
    <button
      type="button"
      class="btn btn-secondary btn-sm"
      onclick="
      dataLayer.push({
        _clear: true,
        event: 'quick shop click',
        quickshopProduct: {
          ...products[0],
          quickshop: true,
        },
      });
    "
    >
      DL20
    </button>

    <hr />
    <a href="?product"><h4>product</h4></a>
    <button
      type="button"
      class="btn btn-secondary btn-sm"
      onclick="
      dataLayer.push({
        _clear: true,
        event: 'add to cart',
        products: [ products[0] ],
      });
      location.reload();
    "
    >
      DL2
    </button>
    <button
      type="button"
      class="btn btn-secondary btn-sm"
      onclick="
      dataLayer.push({
        _clear: true,
        event: 'similar products load',
        similarProducts: products,
      });
    "
    >
      DL16
    </button>

    <hr />
    <a href="?cart"><h4>cart</h4></a>
    <button
      type="button"
      class="btn btn-secondary btn-sm"
      onclick="
      dataLayer.push({
        _clear: true,
        event: 'remove from cart',
        products: [ products[0] ],
      });
      location.reload();
    "
    >
      DL3
    </button>
    <button
      type="button"
      class="btn btn-secondary btn-sm"
      onclick="
      dataLayer.push({
        _clear: true,
        event: 'initiate checkout',
      });
      location.reload();
    "
    >
      DL6
    </button>

    <hr />
    <a href="?checkout"><h4>checkout</h4></a>
    <button
      type="button"
      class="btn btn-secondary btn-sm"
      onclick="
      dataLayer.push({
        _clear: true,
        event: 'checkout step',
        step: 1,
        checkoutProducts: products,
        checkoutDelivery: deliveries,
        checkoutPayment: payment
      });
    "
    >
      DL7 - step 1
    </button>
    <button
      type="button"
      class="btn btn-secondary btn-sm"
      onclick="
      dataLayer.push({
        _clear: true,
        event: 'checkout step',
        step: 2,
        checkoutProducts: products,
        checkoutDelivery: deliveries,
        checkoutPayment: payment
      });
    "
    >
      DL7 - step 2
    </button>
    <button
      type="button"
      class="btn btn-secondary btn-sm"
      onclick="
      dataLayer.push({
        _clear: true,
        event: 'checkout step',
        step: 3,
        checkoutProducts: products,
        checkoutDelivery: deliveries,
        checkoutPayment: payment
      });
    "
    >
      DL7 - step 3
    </button>
    <button
      type="button"
      class="btn btn-secondary btn-sm"
      onclick="
      dataLayer.push({
        _clear: true,
        event: 'checkout step',
        step: 4,
        checkoutProducts: products,
        checkoutDelivery: deliveries,
        checkoutPayment: payment
      });
    "
    >
      DL7 - step 4
    </button>
    <button
      type="button"
      class="btn btn-secondary btn-sm"
      onclick="
      dataLayer.push({
        _clear: true,
        event: 'coupon code insertion',
        couponCode: '50%OFF',
      });
    "
    >
      DL32
    </button>
    <button
      type="button"
      class="btn btn-secondary btn-sm"
      onclick="
      dataLayer.push({
        _clear: true,
        event: 'vendor code insertion',
        vendorCode: 'vendor123',
      });
    "
    >
      DL33
    </button>

    <hr />
    <a href="?purchase"><h4>purchase</h4></a>
    <button
      type="button"
      class="btn btn-secondary btn-sm"
      onclick="
      dataLayer.push({
        _clear: true,
        event: 'purchase',
        transaction: transaction,
      });
    "
    >
      DL4
    </button>
    <button
      type="button"
      class="btn btn-primary btn-sm"
      data-gtm-click-action="purchase"
    >
      DA3 - purchase
    </button>
    <hr />
  </body>
</html>
